<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
    <head th:replace="layout::head">

    </head>

    <body>
        <header th:replace="layout::header">

        </header>

        <main class="container">
            <h2>Detalles de tu compra</h2>

            <div class="row row-cols-1 row-cols-lg-2 g-3">
                <div class="col col-lg-8">
                    <div class="p-4 text-bg-light rounded">
                        <h6 class="mb-3">
                            <span th:text="${#temporals.format(compra.createdAt, 'd')}"></span> de
                            <span th:text="${#temporals.format(compra.createdAt, 'MMMM')}"></span> de
                            <span th:text="${#temporals.format(compra.createdAt, 'yyyy')}"></span>
                            -
                            <span class="text-success">Pedido #<span th:text="${compra.id}"></span></span>
                        </h6>

                        <table class="w-100">
                            <tbody>
                                <tr>
                                    <td class="pe-3">
                                        <img th:src="@{/images/{img} (img = ${compra.producto.imagen})}" class="border rounded object-fit-contain" alt="Imagen del producto" style="width: 10rem; height: 10rem;">
                                    </td>
                                    <td class="w-100">
                                        <div class="d-flex flex-column gap-1">
                                            <h5 th:href="@{/producto/{id} (id = ${compra.producto.id})}" th:text="${compra.producto.nombre}"></h5>
                                            
                                            <p th:if="${compra.cantidad == 1}" class="mb-0 text-muted">1 unidad</p>
                                            <p th:unless="${compra.cantidad == 1}" class="mb-0 text-muted"><span th:text="${compra.cantidad}"></span> unidades</p>
                                        </div>
                                    </td>
                                    <td class="text-nowrap">
                                        <div class="d-flex flex-column gap-1">
                                            <h6 class="mb-0 text-muted">Total</h6>
                                            <h4 class="mb-0">$ <span th:text="${#numbers.formatDecimal(compra.precio, 0, 'POINT', 0, 'DEFAULT')}"></span></h4>
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>

                    </div>
                </div>

                <div class="col col-lg-4">
                    <div class="p-4 text-bg-light rounded shadow">
                        <div class="d-flex align-items-center justify-content-start gap-4">
                            <div>
                                <i class="display-3 fa-solid fa-address-card text-muted"></i>
                            </div>
                            <div>
                                <p class="mb-1">Para <span class="fw-semibold" th:text="${compra.usuario.nombre + ' ' + compra.usuario.apellido}"></span></p>
                                <p class="mb-1 text-muted"><i class="fa-solid fa-envelope text-success"></i> <span th:text="${compra.usuario.email}"></span></p>
                                <p class="mb-1 text-muted" th:if="${compra.usuario.telefono != null}"><i class="fa-solid fa-phone text-success"></i> <span th:text="${compra.usuario.telefono}"></span></p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- <div class="card my-4">
                <div class="card-body">        
                    <table class="table" id="products-table">
                        <thead>
                            <tr>
                                <th></th>
                                <th>Producto</th>
                                <th>Cantidad</th>
                                <th>Total</th>
                                <th>Fecha</th>
                                <th></th>
                            </tr>
                        </thead>

                        <tbody>
                            <tr th:each="item: ${compra}">
                                <td>
                                    <img th:src="@{/images/{img} (img = ${compra.producto.imagen})}" alt="producto" height="64px">
                                </td>
                                <td th:text="${item.producto.nombre}"></td>
                                <td th:text="${#numbers.formatDecimal(item.cantidad, 0, 'DEFAULT', 0, 'POINT')}"></td>
                                <td th:text="'$ ' + ${#numbers.formatDecimal(item.producto.precio * item.cantidad, 0, 'DEFAULT', 0, 'POINT')}"></td>
                                <td th:text="${item.createdAt}"></td>
                                <td>
                                    <a th:href="@{/producto/{id} (id = ${item.producto.id})}" class="btn btn-primary">Ver producto</a>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div> -->
        </main>
        
        <!-- Footer y scripts -->
        <footer th:replace="layout::footer"></footer>
    </body>
</html>
